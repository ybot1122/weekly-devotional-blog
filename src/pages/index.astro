---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import MailingList from "../components/MailingList.astro";

import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";

const post = (await getCollection("blog"))
  .filter((a) => a.id !== "using-mdx")
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())[0];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main>
      <h3>Hey there!</h3>
      <h1>Welcome to Xformotion</h1>
      <p>A space where transformation isn't just possible—it's inevitable.</p>
      <p>
        <span class="b">Transformotion</span> is a brilliant blend of <span
          class="b">transformation</span
        >
        and <span class="b">motion</span>! It conveys the idea that faith isn't
        static — <span class="b">it's active, evolving, and life-changing</span
        >. Each week, we dive into God's word, uncovering unmissable evidence of
        His presence, power, and purpose in our lives. Whether you're searching
        for clarity, strength, or a fresh perspective, these devotionals will
        challenge you to grow and remind you that real change happens when we
        align our hearts with His truth. Faith isn't meant to be stagnant—it's
        meant to move, shape, and transform us.
      </p><p>
        Take a moment to reflect, reset, and step into the transformation
        waiting for you.
      </p>
      <hr />
      <div class="latest">
        <a href={`/devotionals/${post.id}/`} class="latest-link">
          <div class="text-overlay">
            <div class="scrim">
              <h4 class="title">{post.data.title}</h4>
              <p class="date">
                <FormattedDate date={post.data.pubDate} />
              </p>
            </div>
          </div>
          <img
            width={720}
            height={360}
            src={post.data.heroImage}
            alt=""
            class="bg"
          />
        </a>
      </div>
      <hr />
      <div class="all">
        <h3><a href="/devotionals">Click here to see all devotionals</a></h3>
      </div>
      <hr />
      <MailingList />
    </main>
    <Footer />
  </body>
</html>
<style>
  hr {
    border-color: var(--black);
  }
  main {
    min-height: 100vh;
  }

  .latest {
    margin-top: 2em;
    position: relative;
  }

  .latest .text-overlay {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
  }

  .scrim {
    text-align: center;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    padding: 1em;
  }

  .scrim h4 {
    color: white;
    margin-top: 1em;
  }

  .all {
    text-align: center;
    margin: 2em 0;
  }

  .all a {
    display: inline-block;
    text-decoration: none;
  }
  .all a.active {
    font-weight: bolder;
    text-decoration: underline;
  }

  .b {
    font-weight: bold;
  }
</style>
